<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
</head>
<body>
<h2>Uso de peticiones  asíncronas adaptado a fetch</h2>

<div id="demo">
<button type="button" onclick="loadXMLDoc()">Mostrar país</button>
<button type="button" onclick="flagsix()">Flag</button>
</div>
<script>
	/*Autor: Daniel Norberto Hernández Santiago
	Num Ctrl: 18390015
	Semestre: 7mo Materia: Desarrollo Web 1*/
let respJson = {};
function loadXMLDoc() {//Esta función se ejecuta despues de dar click en el boton "Mostrar país"
fetch("https://restcountries.com/v3.1/name/canada")//Consuma una funcionalidad del web service de países: https://restcountries.com/ por medio de fetch
  .then(response => response.json())
  .then(function(data) {
    body = document.getElementsByTagName("body")[0];
    Kuni = document.createElement('h1');// Se crea el elemento h1 dentro del html, el cual contendra el nombre del país
    Kuni.innerHTML = data[0].name.common;
    body.appendChild(Kuni);
  });
}
function flagsix(){//Función que es llamada después de hacer click en el boton flag la cual muestra una imagen en la página web
fetch("https://flagcdn.com/ca.svg")
    .then(response => response.blob())//Regresa un nuevo objeto Blob creado cuyo contenido consiste en la concatenación de un arreglo de valores establecidos en el parámetro de la función.
    .then(function(blob) {
     
      bandera= URL.createObjectURL(blob);//Creación de un objeto en el cual estará la url de la bandera  que estará dentro del blob
      bender= new Image();
      bender.src = bandera;
      document.getElementsByTagName("body")[0].appendChild(bender);
    });
  }
</script>
</body>
</html>
